# Data-Driven Strategies for Coping with Incomplete DVL Measurements

Nadav Cohen _[∗]_ and Itzik Klein

_The Hatter Department of Marine Technologies_
_Charney School of Marine Sciences, University of Haifa_
Haifa, Israel



_**Abstract**_ **—Autonomous underwater vehicles are specialized**
**platforms engineered for deep underwater operations. Critical**
**to their functionality is autonomous navigation, typically rely-**
**ing on an inertial navigation system and a Doppler velocity**
**log. In real-world scenarios, incomplete Doppler velocity log**
**measurements occur, resulting in positioning errors and mission**
**aborts. To cope with such situations, a model and learning**
**approaches were derived. This paper presents a comparative**
**analysis of two cutting-edge deep learning methodologies, namely**
**LiBeamsNet and MissBeamNet, alongside a model-based average**
**estimator. These approaches are evaluated for their efficacy in**
**regressing missing Doppler velocity log beams when two beams**
**are unavailable. In our study, we used data recorded by a**
**DVL mounted on an autonomous underwater vehicle operated**
**in the Mediterranean Sea. We found that both deep learning**
**architectures outperformed model-based approaches by over**
**16% in velocity prediction accuracy.**
_**Index**_ _**Terms**_ **—Autonomous** **underwater** **vehicle** **(AUV),**
**Doppler velocity log (DVL), Deep Learning**


I. I NTRODUCTION


An autonomous underwater vehicle (AUV) is a self-propelled,
untethered robot designed to operate underwater without direct
human control. These vehicles are equipped with sensors,
navigation systems, and sometimes manipulators, enabling
them to perform various tasks such as oceanographic research,
underwater mapping, pipeline inspection, environmental monitoring, and search and rescue operations. AUVs are valuable
tools for exploring and studying the ocean’s depths, offering
efficiency, flexibility, and the ability to access areas that may
be difficult or dangerous for manned vehicles [1].
The primary navigation sensors equipped in AUVs are the
inertial navigation system (INS), which provides a high-rate
navigation solution characterized by accumulating error over
time, and the Doppler velocity log (DVL), a low-rate sensor
that offers accurate velocity updates to mitigate error accumulation [2], [3]. Navigating through the underwater domain
poses significant challenges, particularly for AUVs, whose
sole purpose is to accomplish this task. Addressing these
challenges is paramount for the successful operation of such
vehicles. One of the challenges in underwater navigation is the
inability of global navigation satellite system (GNSS) signals
to penetrate water, rendering them unreliable for underwater
navigation. As a result, the DVL becomes the sole sensor


_∗_ Corresponding author: N. Cohen (email: ncohe140@campus.haifa.ac.il).



relied upon for correcting the inertial navigation errors. In
real-world scenarios, such as passing over trenches in the
seabed, encountering obstacles that obstruct the sensor’s view,
or executing extreme maneuvers, the DVL may fail to operate
correctly. This is because its mechanism relies on four beams
being transmitted and reflected back to the sensor to estimate
speed. In situations where fewer than three beams are reflected
back, accurate speed estimation becomes impossible [4].
Since incomplete DVL measurements pose a critical problem
for AUV navigation, several solutions have been proposed in
the literature to address this challenge. In [5], [6], an extended
loosely coupled (ELC) strategy is introduced as a solution
for this circumstance. By utilizing the restricted DVL beam
measurements along with external data, the ELC approach
computes the three-dimensional velocity of the AUV and
integrates it into the navigation filter. Liu _et al._ [7] proposed a
method grounded in the tightly coupled approach for INS/DVL
integrated navigation. This method directly incorporates DVL
beam measurements, bypassing the need to transform them
into 3-D velocity. It incorporates limited DVL beam measurements alongside depth updates obtained from a pressure
sensor. In [8] Initially, the vehicle’s translational model is
deduced, capturing the dynamics of translational velocity
across three directions in the body frame. The integration
of this model produces the vehicle’s translational velocity in
the body frame. This velocity, referred to as pseudo-DVL,
functions to offset the lack of DVL in INS/DVL navigation
systems. Additional solutions for scenarios involving complete
DVL outages were introduced in [9], [10].
As hardware capabilities advanced to handle heavy computational loads, the utilization of machine learning (ML) and deep
learning (DL) techniques emerged to enhance AUV navigation

[11]. In [12], a DL approach was applied to enhance DVL
velocity estimation, while in [13], [14], data-driven methods
were employed to estimate the process noise covariance in
INS/DVL fusion. In situations of partial or complete DVL
outage, various ML and DL approaches have been explored
to address this challenge and maintain INS/DVL solutions

[15]–[19]. Specifically, Yona _et al._ proposed a deep learning
approach based on long short-term memory (LSTM) networks
in [20], [21]. This method, known as MissBeamNet, aims to
regress the missing beams using past DVL measurements.
Furthermore, in [12], [22], [23], a series of architectures


called BeamsNet were introduced to tackle scenarios involving
complete, partial, and absent DVL measurements. Notably,
LiBeamsNet utilized a one-dimensional convolutional neural

network (1DCNN) to regress two missing beams.
In this study, we undertake a comparative analysis between
LiBeamsNet and MissBeamNet, alongside a model-based average estimator, to ascertain whether DL approaches surpass
model-based methods and whether long-term dependencies
offer superior solutions in LSTM networks compared to the
feature extraction from nearby windows used in a 1DCNN.
We evaluate these strategies using real-world recorded data
from an AUV experiment conducted in the Mediterranean Sea,
[which is available online at https://github.com/ansfl/A-KIT.](https://github.com/ansfl/A-KIT)
The remainder of the paper is structured as follows: Section
II formulates the problem, while Section III introduces and
discusses the competitive strategies. Section IV provides an
overview of the dataset used in the study, and Section V
presents the results of the comparison. Finally, Section VI
discusses the conclusions drawn from the results.


II. P ROBLEM F ORMULATION


The DVL operates by transmitting four acoustic beams to
the sea floor, and once they are reflected back to the sensor,
it calculates the frequency shift, thereby determining the
velocity of the AUV in the beam directions. Given that the
configuration of the transducers is known and provided by the
manufacturer, solving a least squares problem is necessary to
obtain the velocity in the DVL frame. The DVL velocity vector
estimation based on the beam measurements are [12]:









_**v**_ beam = **T** beam _**v**_ _[d]_ _,_ **T** beam =



_cψ_ beam 1 _sα_ _sψ_ beam 1 _sα_ _cα_

 _cψ_ beam 2 _sα_ _sψ_ beam 2 _sα_ _cα_

_cψ_ beam 3 _sα_ _sψ_ beam 3 _sα_ _cα_

 _cψ_ beam 4 _sα_ _sψ_ beam 4 _sα_ _cα_



(1)
_ψ_ beam _ı_ ˙ = (˙ _ı −_ 1) _·_ 90 _[◦]_ + 45 _[◦]_ _,_ ˙ _ı_ = 1 _,_ 2 _,_ 3 _,_ 4 _._ (2)


_**y**_ = **T** beam [ _**v**_ _[d]_ ( **1** + _**s**_ DVL )] + _**b**_ DVL + _**n**_ (3)


ˆ 2
_**v**_ _[d]_ = argmin _∥_ _**y**_ _−_ **T** beam _**v**_ _[d]_ _∥_ _._ (4)
_**v**_ _[d]_


_**v**_ ˆ _[d]_ = ( **T** _[T]_ beam **[T]** [beam] [)] _[−]_ [1] **[T]** _[T]_ beam _**[y]**_ _[.]_ (5)


In (1), _s_ and _c_ represent sin and cos, respectively, _**v**_ beam _∈_
R [4] _[×]_ [1] denotes the velocity in the beam directions, and _**v**_ _[d]_ _∈_
R [3] _[×]_ [1] is the velocity in the DVL frame. Each beam transducer
undergoes a rotational transformation with a yaw angle _ψ_ beam
and a pitch angle _α_, where _α_ is a constant predefined by
the manufacturer and _i_ is the beam index. The measurements,
prone to inherent errors, are modeled in (3), with _**b**_ DVL _∈_ R [4] _[×]_ [1]

as the bias vector, _**s**_ DVL _∈_ R [3] _[×]_ [1] as the scale factor vector, and
_**n**_ _∈_ R [4] _[×]_ [1] representing zero-mean white Gaussian noise. Upon
obtaining raw measurements, the subsequent step involves
extracting _**v**_ _[d]_ by filtering the data according to the cost
function in (4). The solution of 4 is the velocity in the DVL
frame as detailed in (5).
In real-world scenarios, the DVL may face challenges leading



to the reflection of acoustic beams in directions other than
toward the sensor. When two or more beams are unavailable,
the DVL cannot perform the task of estimating velocity.
Examples of such scenarios may include passing over trenches
on the sea floor, sea creatures obstructing the view of the
sensor, and extreme roll and pitch maneuvers, including the
AUV’s initial operation, diving. Illustrations of these scenarios
are visualized in Fig. 1. In these cases, the navigation solution


Fig. 1. Illustration of scenarios where two or more DVL beams may be
unavailable.


relies solely on the INS, which is known for accumulating
errors over time and cannot serve as a standalone sensor for

navigation.


III. C OMPETITIVE S TRATEGIES


To address incomplete DVL measurements, we focused on
scenarios where two beams are missing, and as a consequence,
the velocity vector cannot be estimated. We examine two stateof-the-art deep learning architectures that employ different
techniques yet utilize only DVL information. The first one is
LiBeamsNet, which employs 1D CNN on past complete DVL
measurements combined with the current observation of the

partial beam measurements to regress the missing beams. The
second one is MissBeamNet, which uses LSTM architecture
to regress the missing beams given past measurements and
the current observation. Both approaches demonstrated good
performance in estimating the missing beams. However, a
question arises regarding which of them performs better: the
1DCNN architectures that work by extracting features from
the window of past measurements or the LSTM network that
considers larger time dependencies.
Both networks underwent training for 100 epochs with a
learning rate of 0.001, a learning rate decay of factor 0.1 after
50 epochs, a mini-batch size of 4, and the ADAM optimizer. In
addition, for both networks, _N_ = 3 past DVL measurements
were employed.
In LiBeamsNet, the measurements undergo processing through
a 1D convolutional layer comprising six filters of size 2 _×_ 1
aimed at extracting features from the data. Following this, the
features extracted are flattened and then subjected to a dropout


Fig. 2. The LiBeamsNet architecture, as introduced in [22], presenting a
1DCNN for extracting features from _N_ past DVL beam measurements.


Fig. 3. The MissBeamNet architecture, as described in [21], employs an
LSTM structure to analyze _N_ past DVL beam measurements, focusing on
capturing longer-term dependencies.


layer with a dropout rate of 0.2. Subsequently, a sequence of
fully connected layers is employed, and the current partial
beam measurement is integrated before passing through the
last fully connected layer, ultimately producing a 4 _×_ 1
vector representing the estimated DVL four-beam velocity.
The architecture and activation functions after each layer are
illustrated in Fig. 2. In MissBeamNet, after the LSTM with a
hidden size of 500 performs feature extraction, these features
are concatenated with the available beam measurements into a

fully connected layer. This layer executes the final processing,
resulting in the output of the regressed missing beams, as can
be seen in Fig. 3. For comparison, we examined a conventional
average estimator, which takes the average of the _N_ = 3 past
DVL beam measurements to regress the missing ones.



IV. D ATASET


Experiments were conducted in the Mediterranean Sea near
the shores of Haifa, Israel, utilizing the Snapir AUV to collect
data. Snapir is a modified ECA Group A18D mid-size AUV
designed for deep-water applications, capable of autonomous
missions up to 3000 meters in depth and featuring a 21-hour
endurance [24]. It is equipped with the Teledyne RDI Work
Horse Navigator DVL [25], which achieves precise velocity
measurements with a standard deviation of 0 _._ 02 [m/s] and
operates at a frequency of 1 [Hz].
The dataset was recorded in June 2022, and the train set
consists of eleven distinct data sections, each lasting 400 [sec],
featuring diverse dynamics for comprehensive training. To
assess the proposed approach, two additional segments of data,
each lasting 400 [sec] and not included in the training set,
were examined as the test set. To emulate a unit under test,
we implemented the error model (3) with specific parameter
values: _α_ = 20 _[◦]_, **s** _DV L_ = **0** 3 _×_ 1, **b** _DV L_ = 0 _._ 001 _·_ **1** 3 _×_ 1 ; [ _m/s_ ],
and **n** follows a normal distribution with zero mean and a
standard deviation of 0 _._ 001 [ _m/s_ ]. All the data is accessible on
[GitHub at the following link: https://github.com/ansfl/A-KIT,](https://github.com/ansfl/A-KIT)
as introduced in [14].


V. R ESULTS


In the initial phase of the analysis, we examined the loss
values as a function of the number of epochs. In Fig. 4,
both the training and testing loss values for LiBeamsNet are
depicted, while Fig. 5 illustrates the loss values for MissBeamNet. Both graphs show a convergence of the training
loss, with LiBeamsNet achieving a lower value. Examining
the test loss values reveals that MissBeamNet converges more
rapidly and exhibits a monotonically decreasing trend, whereas
LiBeamsNet takes a longer time to converge. This suggests
that MissBeamNet is better able to generalize the problem.


Fig. 4. The loss values of both the train and test sets for LiBeamsNet as a
function of the epoch number.


For a robust evaluation, we considered four matrices: 1) root
mean squared error (RMSE), 2) mean absolute error (MAE),
3) the coefficient of determination ( _R_ [2] ), and 4) the variance
accounted for (VAF). RMSE and MAE measure velocity errors


Fig. 5. The loss values of both the train and test sets for MissBeamNet as a
function of the epoch number.


in [ _m/s_ ], while _R_ [2] and VAF are unitless. The definitions of
these matrices are as follows:



similar outputs. In terms of RMSE and MAE, a significant
improvement of over 16% was observed with the adoption
of the data-driven approaches compared to the model-based
average estimator. Analyzing the statistical properties _R_ [2] and
VAF, all three approaches exhibit a good fit for the given task.
Nevertheless, the data-driven methods consistently demonstrate superior performance over the model-based average
estimator.


VI. C ONCLUSIONS


AUVs are specifically engineered to function in the depths
of the underwater environment beyond the reach of human
exploration. Typically, AUV navigation heavily relies on data
from DVL sensors to rectify any accumulated errors from the
INS. However, in situations where the DVL fails to provide
accurate velocity updates, which could occur due to various
scenarios, the AUV may be compelled to abort its mission,
subject to the manufacturer’s protocol.
One common approach to tackle this challenge is to forecast
the missing beam measurements using an average estimator,
which utilizes past measurements. In our study, we compare
two state-of-the-art data-driven methods, LiBeamsNet and
MissBeamNet, with a model-based average estimator. Our
results reveal that despite employing distinct DL architectures—one based on 1DCC and the other on LSTM—both

exhibit similar performance, with a statistically insignificant
difference, yet outperforming the average estimator by more
than 16% in terms of velocity prediction accuracy.


A CKNOWLEDGMENTS


N.C. is supported by the Maurice Hatter Foundation and
University of Haifa presidential scholarship for outstanding
students on a direct Ph.D. track.


R EFERENCES


[1] A. Sahoo, S. K. Dwivedy, and P. Robi, “Advancements in the field of
autonomous underwater vehicle,” _Ocean Engineering_, vol. 181, pp. 145–
160, 2019.

[2] P. D. Groves, “Principles of GNSS, inertial, and multisensor integrated
navigation systems,” _IEEE Aerospace and Electronic Systems Magazine_,
vol. 30, no. 2, pp. 26–27, 2015.

[3] J. J. Leonard and A. Bahr, “Autonomous underwater vehicle navigation,”
_Springer handbook of ocean engineering_, pp. 341–358, 2016.

[4] N. A. Brokloff, “Matrix algorithm for Doppler sonar navigation,” in
_Proceedings of OCEANS’94_, vol. 3, pp. III–378, IEEE, 1994.

[5] A. Tal, I. Klein, and R. Katz, “Inertial navigation system/Doppler velocity log (INS/DVL) fusion with partial DVL measurements,” _Sensors_,
vol. 17, no. 2, p. 415, 2017.

[6] R. Eliav and I. Klein, “INS/partial DVL measurements fusion with
correlated process and measurement noise,” _Multidisciplinary Digital_
_Publishing Institute Proceedings_, vol. 4, no. 1, p. 34, 2018.

[7] P. Liu, B. Wang, Z. Deng, and M. Fu, “INS/DVL/PS tightly coupled
underwater navigation method with limited DVL measurements,” _IEEE_
_Sensors Journal_, vol. 18, no. 7, pp. 2994–3002, 2018.

[8] A. Karmozdi, M. Hashemi, H. Salarieh, and A. Alasty, “Implementation
of translational motion dynamics for INS data fusion in DVL outage in
underwater navigation,” _IEEE Sensors Journal_, vol. 21, no. 5, pp. 6652–
6659, 2020.

[9] I. Klein and Y. Lipman, “Continuous INS/DVL fusion in situations of
DVL outages,” in _2020 IEEE/OES Autonomous Underwater Vehicles_
_Symposium (AUV)_, pp. 1–6, IEEE, 2020.



_RMSE_ ( _**x**_ _ı_ ˙ _,_ ˆ _**x**_ _ı_ ˙ ) =



_N_
_ı_ ˙=1 [(] _**[x]**_ _[ı]_ [˙] _[ −]_ _**[x]**_ [ˆ] _[ı]_ [˙] [)] [2] (6)
~~��~~ _M_



_M_
_MAE_ ( _**x**_ _ı_ ˙ _,_ ˆ _**x**_ _ı_ ˙ ) = � _ı_ ˙=1 _[|]_ _**[x]**_ _[ı]_ [˙] _[ −]_ _**[x]**_ [ˆ] _[ı]_ [˙] _[|]_ (7)

_M_



_M_
_R_ [2] ( _**x**_ _ı_ ˙ _,_ ˆ _**x**_ _ı_ ˙ ) = 1 _−_ � _ıM_ ˙=1 [(] _**[x]**_ _[ı]_ [˙] _[ −]_ _**[x]**_ [ˆ] _[ı]_ [˙] [)] [2] (8)

˙
~~�~~ _ı_ =1 [(] _**[x]**_ _[ı]_ [˙] _[ −]_ _**[x]**_ [¯] _[ı]_ [˙] [)] [2]

_V AF_ ( _**x**_ _ı_ ˙ _,_ ˆ _**x**_ _ı_ ˙ ) = [1 _−_ _[var]_ _var_ [(] _**[x]**_ _[ı]_ [˙] ( _[ −]_ _**x**_ _ı_ ˙ ) _**[x]**_ [ˆ] _[ı]_ [˙] [)] ] _×_ 100 (9)


where _M_ denotes the number of samples, _**x**_ _ı_ ˙ signifies the
ground truth velocity vector norm of the DVL, ˆ _**x**_ _ı_ ˙ represents
the predicted velocity vector norm of the AUV, generated after
regressing the two missing beams by the network, ¯ _**x**_ _ı_ ˙ denotes
the mean of the ground truth velocity vector norm of the DVL,
and _var_ stands for variance. It is noteworthy that achieving
a VAF of 100, an _R_ [2] of 1, and both RMSE and MAE being
zero would characterize the model as exceptional [12].
By looking at Table I, we can compare the outputs of the
discussed strategies. It is evident that the LiBeamsNet architec

TABLE I

A TABLE SUMMARIZING THE FINDINGS REGARDING THE DESIRED

METRICS AND ILLUSTRATING THE IMPROVEMENT ACHIEVED BY THE DL

APPROACHES COMPARED TO THE MODEL - BASED AVERAGE ESTIMATOR .

|Metric|LiBeamsNet|MissBeamNet|Average|
|---|---|---|---|
|RMSE [m/s]|0.0653|0.0662|0.0794|
|RMSE [%]|17.75|16.62|N/A|
|MAE [m/s]|0.0451|0.0422|0.0558|
|MAE [%]<br>|19.12|24.37|N/A|
|_R_~~2~~|0.9899|0.9896|0.9850|
|VAF|99.11|99.04|98.55|



ture, utilizing the 1DCNN strategy, outperforms MissBeamNet
in every metric, albeit by a marginal margin that could be
attributed to statistical fluctuations, resulting in approximately


[10] I. Klein, Y. Gutnik, and Y. Lipman, “Estimating DVL velocity in
complete beam measurement outage scenarios,” _IEEE Sensors Journal_,
vol. 22, no. 21, pp. 20730–20737, 2022.

[11] N. Cohen and I. Klein, “Inertial Navigation Meets Deep Learning:
A Survey of Current Trends and Future Directions,” _arXiv preprint_
_arXiv:2307.00014_, 2023.

[12] N. Cohen and I. Klein, “BeamsNet: A data-driven approach enhancing
Doppler velocity log measurements for autonomous underwater vehicle
navigation,” _Engineering Applications of Artificial Intelligence_, vol. 114,
p. 105216, 2022.

[13] B. Or and I. Klein, “A hybrid adaptive velocity aided navigation filter
with application to INS/DVL fusion,” in _OCEANS 2022, Hampton_
_Roads_, pp. 1–5, IEEE, 2022.

[14] N. Cohen and I. Klein, “A-KIT: Adaptive Kalman-Informed Transformer,” _arXiv preprint arXiv:2401.09987_, 2024.

[15] S. Ansari-Rad, M. Hashemi, and H. Salarieh, “Pseudo DVL reconstruction by an evolutionary TS-fuzzy algorithm for ocean vehicles,”
_Measurement_, vol. 147, p. 106831, 2019.

[16] P.-F. Lv, B. He, J. Guo, Y. Shen, T.-H. Yan, and Q.-X. Sha, “Underwater
navigation methodology based on intelligent velocity model for standard
AUV,” _Ocean Engineering_, vol. 202, p. 107073, 2020.

[17] D. Wang, X. Xu, Y. Yao, and T. Zhang, “Virtual DVL reconstruction
method for an integrated navigation system based on DS-LSSVM
algorithm,” _IEEE Transactions on Instrumentation and Measurement_,
vol. 70, pp. 1–13, 2021.

[18] Y. Yao, X. Xu, X. Xu, and I. Klein, “Virtual beam aided SINS/DVL
tightly coupled integration method with partial DVL measurements,”
_IEEE Transactions on Vehicular Technology_, vol. 72, no. 1, pp. 418–
427, 2022.

[19] J. Zhu, A. Li, F. Qin, L. Chang, and L. Qian, “A hybrid method for
dealing with DVL faults of SINS/DVL integrated navigation system,”
_IEEE Sensors Journal_, vol. 22, no. 16, pp. 15844–15854, 2022.

[20] M. Yona and I. Klein, “Compensating for partial Doppler velocity log
outages by using deep-learning approaches,” in _2021 IEEE International_
_Symposium on Robotic and Sensors Environments (ROSE)_, pp. 1–5,
IEEE, 2021.

[21] M. Yona and I. Klein, “MissBeamNet: Learning Missing Doppler
Velocity Log Beam Measurements,” _arXiv preprint arXiv:2301.11597_,
2023.

[22] N. Cohen and I. Klein, “LiBeamsNet: AUV velocity vector estimation
in situations of limited DVL beam measurements,” in _OCEANS 2022,_
_Hampton Roads_, pp. 1–5, IEEE, 2022.

[23] N. Cohen, Z. Yampolsky, and I. Klein, “Set-Transformer BeamsNet for
AUV Velocity Forecasting in Complete DVL Outage Scenarios,” in _2023_
_IEEE Underwater Technology (UT)_, pp. 1–6, IEEE, 2023.

[24] ECA Group, “A18-D AUV: Autonomous Underwater Vehicle.” [https://www.ecagroup.com/en/solutions/](https://www.ecagroup.com/en/solutions/a18-d-auv-autonomous-underwater-vehicle)
[a18-d-auv-autonomous-underwater-vehicle, Accessed: January 2024.](https://www.ecagroup.com/en/solutions/a18-d-auv-autonomous-underwater-vehicle)

[25] Teledyne Marine, “Doppler Velocity Logs.” [https://www.](https://www.teledynemarine.com/products/product-line/navigation-positioning/doppler-velocity-logs)
[teledynemarine.com/products/product-line/navigation-positioning/](https://www.teledynemarine.com/products/product-line/navigation-positioning/doppler-velocity-logs)
[doppler-velocity-logs, Accessed: January 2024.](https://www.teledynemarine.com/products/product-line/navigation-positioning/doppler-velocity-logs)


